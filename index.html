<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <title>YallaGoda</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@300&display=swap" rel="stylesheet">
  <style>
    * {
      /*background-color: #9e9e9e;*/
      font-size: 25pt;
      color: #f8f1cf;
    }
    body {
      /*background-image: url('assets/qatar-2022.jpg');*/
      background-image: url('assets/6.jpg');
      /*background-color: black;*/
      background-size: contain;
      padding-right: 45px;
      padding-left: 65px;
    }
    #myHeader {
      font-size: 28pt;
      position: fixed;
      width: 100%;
      display: flex;
      border-radius: 5px;
      color: #fabd0b;
      font-weight: bolder;
    }
    #tables {
      padding: 50px 0px 0px 0px;
    }
    .groups {
      /*font-family: Trebuchet, Helvetica, sans-serif;*/
      font-family: 'Noto Kufi Arabic', sans-serif;
      border-collapse: collapse;
      width: 100%;
      text-align:center;
    }
    .groups td, .groups th {
      border: 1px solid #86373700;
      padding: 8px;
    }
    /*.groups tr:nth-child(even){background-color: #f2f2f2;}*/
    /*.groups tr:hover {background-color: rgb(239, 70, 70);}*/
    .groups th {
      padding-top: 4px;
      padding-bottom: 4px;
      text-align:center;
      background-color: #42071e;
    }
    h4 {
      font-size: 35pt;
      font-weight: bolder;
      padding-top: 30px;
    }
    button {
      background-color: #42071e;
      border-color: #fabd0b;
      text-align: center;
    }
    button:hover {
      background-color: #11c9b79a;
    }
    button.selected {
      background-color: #11c9b79a;
    }
    .score {
      font-size: 20pt;
      position: relative;
      top: 15px;
      left: 5px;
      color: #fabd0b;
    }
    tr.playerSelection {
      background-color: #11c9b765;
    }
    td.النقاط {
      font-weight: bolder;
      color: #fabd0b;
    }
    .w3-block {
      height: 70px;
      text-align: center;
      padding-bottom: 20px;
    }
    </style>
</head>
<body>
<script>
</script>
  <div id="myHeader" class="w3-bar" style="background-color: #4d0922; visibility: hidden;">
    <button id="goda" class="w3-block" onclick="selectTab(event,'goda')"><span class="score">16/8</span> جودة</button>
    <button id="kim" class="w3-block" onclick="selectTab(event,'kim')"><span class="score">16/8</span> كريم</button>
    <button id="amro" class="w3-block" onclick="selectTab(event,'amro')"><span class="score">16/8</span> عمرو</button>
  </div>
  <div id="tables">
  <table class="groups">
    <h4>المجموعة 1</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 2</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 3</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 4</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 5</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 6</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 7</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  <table class="groups">
    <h4>المجموعة 8</h4>
    <tr>
      <th>المركز</th>
      <th>الفريق</th>
      <th>لعب</th>
      <th>فرق أهداف</th>
      <th>النقاط</th>
    </tr>
    <tr>
      <td class="المركز">1</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">2</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">3</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
    <tr>
      <td class="المركز">4</td>
      <td class="الفريق">-</td>
      <td class="لعب">-</td>
      <td class="فرق أهداف">-</td>
      <td class="النقاط">-</td>
    </tr>
  </table>
  </div>
  <div id="fromYallaKora" style="display: none"></div>
<script>
var yallaWebPage = '';
var lol = ['lol'];
fetch(`https://api.allorigins.win/get?url=${encodeURIComponent('https://www.yallakora.com/world-cup/2767/Group-Standing/%D8%AA%D8%B1%D8%AA%D9%8A%D8%A8-%D8%A7%D9%84%D9%85%D8%AC%D9%85%D9%88%D8%B9%D8%A7%D8%AA-%D9%83%D8%A3%D8%B3-%D8%A7%D9%84%D8%B9%D8%A7%D9%84%D9%85#wc-menu')}`)
                    .then(response => {
                      if (response.ok) return response.json()
                      throw new Error('Network response was not ok.')
                    })
                    //.then(data => getYallaKora(data.contents));
                    .then(function(data) {
                      yallaWebPage = data.contents;
                      getYallaKora(yallaWebPage);
                      processDataFromYallaKora();
                      setScore('goda');
                      setScore('kim');
                      setScore('amro');
                      // set header display to seen
                      document.getElementById('myHeader').style.visibility = 'visible';
                    });


function getYallaKora(yPage) {
  ////<section class="groupTabs GroupStanding
  ////<section class="tourMatches next">
  let newYpage = yPage.substring(yPage.indexOf('<section class="groupTabs GroupStanding'), yPage.indexOf('<section class="tourMatches next">'));
  document.getElementById('fromYallaKora').innerHTML = newYpage;
}

/*function processDataFromYallaKora() {
  var tablesYK, rowsYK, divsYK, teamYK, matchP, matchW, matchD, matchL, goalsIn, goalsOut, goalDiff, points;
  tablesYK = document.getElementsByClassName("table");
  for (let i = 0; i < 8; i++) {
    rowsYK = tablesYK[i].getElementsByClassName('wRow');
    for (let j = 0; j < 4; j++) {
      divsYK = rowsYK[j].getElementsByTagName('div');
      teamYK = divsYK[1].getElementsByTagName('p')[0].innerHTML;
      matchP = divsYK[2].innerHTML;
      matchW = divsYK[3].innerHTML;
      matchD = divsYK[4].innerHTML;
      matchL = divsYK[5].innerHTML;
      goalsIn = divsYK[6].innerHTML;
      goalsOut = divsYK[7].innerHTML;
      goalDiff = divsYK[8].innerHTML;
      points = divsYK[9].innerHTML;
      console.log([teamYK, matchP, matchW, matchD, matchL, goalsIn, goalsOut, goalDiff, points]);
    }
  }
}*/

function processDataFromYallaKora() {
  let tablesYK, rowsYK, divsYK;
  let teamYK = [], matchP = [], matchW = [], matchD = [], matchL = [], goalsIn = [], goalsOut = [], goalDiff = [], points = [];
  tablesYK = document.getElementsByClassName("table");
  for (let i = 0; i < 8; i++) {
    rowsYK = tablesYK[i].getElementsByClassName('wRow');
    for (let j = 0; j < 4; j++) {
      divsYK = rowsYK[j].getElementsByTagName('div');
      teamYK.push(divsYK[1].getElementsByTagName('p')[0].innerHTML);
      matchP.push(divsYK[2].innerHTML);
      matchW.push(divsYK[3].innerHTML);
      matchD.push(divsYK[4].innerHTML);
      matchL.push(divsYK[5].innerHTML);
      goalsIn.push(divsYK[6].innerHTML);
      goalsOut.push(divsYK[7].innerHTML);
      goalDiff.push(divsYK[8].innerHTML);
      points.push(divsYK[9].innerHTML);
    }
  }
  //
  var myTables = document.getElementById('tables');
  //var myTeam = myTables.getElementsByClassName('الفريق');
  for (let i = 0; i < 32; i++) {
    myTables.getElementsByClassName('الفريق')[i].innerHTML = teamYK[i].trim();
    myTables.getElementsByClassName('لعب')[i].innerHTML = matchP[i].trim();
    myTables.getElementsByClassName('فرق أهداف')[i].innerHTML = goalDiff[i].trim();
    myTables.getElementsByClassName('النقاط')[i].innerHTML = points[i].trim();
  }
  //console.log([teamYK, matchP, matchW, matchD, matchL, goalsIn, goalsOut, goalDiff, points]);
}


/*
function wait(ms){
   var start = new Date().getTime();
   var end = start;
   while(end < start + ms) {
     end = new Date().getTime();
  }
}
*/

let teamScore, groupScore, teamsSelected, names;
names = ['goda', 'kim', 'amro'];
teamsSelected = [['هولندا', 'السنغال', 'إنجلترا', 'أمريكا', 'السعودية', 'الأرجنتين', 'فرنسا', 'الدنمارك', 
'إسبانيا', 'ألمانيا', 'بلجيكا', 'كرواتيا', 'البرازيل', 'الكاميرون', 'البرتغال', 'أوروجواي'], 
['هولندا', 'السنغال', 'إنجلترا', 'ويلز', 'المكسيك', 'الأرجنتين', 'فرنسا', 'الدنمارك', 
'إسبانيا', 'ألمانيا', 'بلجيكا', 'كرواتيا', 'البرازيل', 'سويسرا', 'البرتغال', 'أوروجواي'], 
['هولندا', 'السنغال', 'إنجلترا', 'إيران', 'بولندا', 'الأرجنتين', 'فرنسا', 'الدنمارك', 
'إسبانيا', 'ألمانيا', 'بلجيكا', 'المغرب', 'البرازيل', 'الكاميرون', 'البرتغال', 'كوريا الجنوبية']];
function setScore(playerName){
  teamScore = 0;
  groupScore = 0;
  const groups = document.getElementsByClassName("groups");
  for (i = 0; i < groups.length; i++) {
    var teams = groups[i].getElementsByClassName("الفريق");
    for (j = 0; j < 2; j++) {
      if (teamsSelected[names.indexOf(playerName)].includes(teams[j].innerHTML)) {
        teamScore ++;
        groupScore += 0.5;
      }
    }
    if (groupScore % 1 !== 0 ) { groupScore -= 0.5; }
  }
  document.getElementById(playerName).childNodes[0].innerHTML = `${teamScore}/${groupScore}`;
}

function selectTab(evt, myName) {
  var i, x, tablinks, teams;
  tablinks = document.getElementsByClassName("w3-block");
  for (i = 0; i < 3; i++) {
    tablinks[i].className = tablinks[i].className.replace(" selected", "");
  }
  evt.currentTarget.className += " selected";
  teams = document.getElementsByClassName("الفريق");
  for (i = 0; i < teams.length; i++) {
    teams[i].parentElement.className = '';
    if (teamsSelected[names.indexOf(myName)].includes(teams[i].innerHTML)) {
      teams[i].parentElement.className += "playerSelection";
    }
  }
}
</script>
</body>
</html>